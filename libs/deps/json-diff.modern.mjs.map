{"version":3,"file":"json-diff.modern.mjs","sources":["../../node_modules/deep-object-diff/mjs/utils.js","../../node_modules/deep-object-diff/mjs/added.js","../../node_modules/deep-object-diff/mjs/deleted.js","../../node_modules/deep-object-diff/mjs/updated.js","../../node_modules/deep-object-diff/mjs/detailed.js"],"sourcesContent":["export const isDate = d => d instanceof Date;\nexport const isEmpty = o => Object.keys(o).length === 0;\nexport const isObject = o => o != null && typeof o === 'object';\nexport const hasOwnProperty = (o, ...args) => Object.prototype.hasOwnProperty.call(o, ...args)\nexport const isEmptyObject = (o) => isObject(o) && isEmpty(o);\nexport const makeObjectWithoutPrototype = () => Object.create(null);\n","import { isEmpty, isObject, hasOwnProperty, makeObjectWithoutPrototype } from './utils.js';\n\nconst addedDiff = (lhs, rhs) => {\n\n  if (lhs === rhs || !isObject(lhs) || !isObject(rhs)) return {};\n\n\n  return Object.keys(rhs).reduce((acc, key) => {\n    if (hasOwnProperty(lhs, key)) {\n      const difference = addedDiff(lhs[key], rhs[key]);\n\n      if (isObject(difference) && isEmpty(difference)) return acc;\n\n      acc[key] = difference;\n      return acc;\n    }\n\n    acc[key] = rhs[key];\n    return acc;\n  }, makeObjectWithoutPrototype());\n};\n\nexport default addedDiff;\n","import { isEmpty, isObject, hasOwnProperty, makeObjectWithoutPrototype } from './utils.js';\n\nconst deletedDiff = (lhs, rhs) => {\n  if (lhs === rhs || !isObject(lhs) || !isObject(rhs)) return {};\n\n  return Object.keys(lhs).reduce((acc, key) => {\n    if (hasOwnProperty(rhs, key)) {\n      const difference = deletedDiff(lhs[key], rhs[key]);\n\n      if (isObject(difference) && isEmpty(difference)) return acc;\n\n      acc[key] = difference;\n      return acc;\n    }\n\n    acc[key] = undefined;\n    return acc;\n  }, makeObjectWithoutPrototype());\n};\n\nexport default deletedDiff;\n","import { isDate, isEmptyObject, isObject, hasOwnProperty, makeObjectWithoutPrototype } from './utils.js';\n\nconst updatedDiff = (lhs, rhs) => {\n  if (lhs === rhs) return {};\n\n  if (!isObject(lhs) || !isObject(rhs)) return rhs;\n\n  if (isDate(lhs) || isDate(rhs)) {\n    if (lhs.valueOf() == rhs.valueOf()) return {};\n    return rhs;\n  }\n\n  return Object.keys(rhs).reduce((acc, key) => {\n    if (hasOwnProperty(lhs, key)) {\n      const difference = updatedDiff(lhs[key], rhs[key]);\n\n      // If the difference is empty, and the lhs is an empty object or the rhs is not an empty object\n      if (isEmptyObject(difference) && !isDate(difference) && (isEmptyObject(lhs[key]) || !isEmptyObject(rhs[key])))\n        return acc; // return no diff\n\n      acc[key] = difference;\n      return acc;\n    }\n\n    return acc;\n  }, makeObjectWithoutPrototype());\n};\n\nexport default updatedDiff;\n","import addedDiff from './added.js';\nimport deletedDiff from './deleted.js';\nimport updatedDiff from './updated.js';\n\nconst detailedDiff = (lhs, rhs) => ({\n  added: addedDiff(lhs, rhs),\n  deleted: deletedDiff(lhs, rhs),\n  updated: updatedDiff(lhs, rhs),\n});\n\nexport default detailedDiff;\n"],"names":["isDate","d","Date","isEmpty","o","Object","keys","length","isObject","hasOwnProperty","args","prototype","call","isEmptyObject","makeObjectWithoutPrototype","create","addedDiff","lhs","rhs","reduce","acc","key","difference","deletedDiff","undefined","updatedDiff","valueOf","added","deleted","updated"],"mappings":"AAAO,MAAMA,EAASC,GAAKA,aAAaC,KAC3BC,EAAUC,GAA+B,IAA1BC,OAAOC,KAAKF,GAAGG,OAC9BC,EAAWJ,GAAU,MAALA,GAA0B,iBAANA,EACpCK,EAAiB,CAACL,KAAMM,IAASL,OAAOM,UAAUF,eAAeG,KAAKR,KAAMM,GAC5EG,EAAiBT,GAAMI,EAASJ,IAAMD,EAAQC,GAC9CU,EAA6B,IAAMT,OAAOU,OAAO,MCHxDC,EAAY,CAACC,EAAKC,IAElBD,IAAQC,GAAQV,EAASS,IAAST,EAASU,GAGxCb,OAAOC,KAAKY,GAAKC,OAAO,CAACC,EAAKC,KACnC,GAAIZ,EAAeQ,EAAKI,GAAM,CAC5B,MAAMC,EAAaN,EAAUC,EAAII,GAAMH,EAAIG,IAE3C,OAAIb,EAASc,IAAenB,EAAQmB,KAEpCF,EAAIC,GAAOC,GAF6CF,EAO1D,OADAA,EAAIC,GAAOH,EAAIG,GACRD,CAAG,EACTN,KAfyD,GCFxDS,EAAc,CAACN,EAAKC,IACpBD,IAAQC,GAAQV,EAASS,IAAST,EAASU,GAExCb,OAAOC,KAAKW,GAAKE,OAAO,CAACC,EAAKC,KACnC,GAAIZ,EAAeS,EAAKG,GAAM,CAC5B,MAAMC,EAAaC,EAAYN,EAAII,GAAMH,EAAIG,IAE7C,OAAIb,EAASc,IAAenB,EAAQmB,KAEpCF,EAAIC,GAAOC,GAF6CF,EAO1D,OADAA,EAAIC,QAAOG,EACJJ,CAAG,EACTN,KAdyD,GCDxDW,EAAc,CAACR,EAAKC,IACpBD,IAAQC,EAAY,GAEnBV,EAASS,IAAST,EAASU,GAE5BlB,EAAOiB,IAAQjB,EAAOkB,GACpBD,EAAIS,WAAaR,EAAIQ,UAAkB,GACpCR,EAGFb,OAAOC,KAAKY,GAAKC,OAAO,CAACC,EAAKC,KACnC,GAAIZ,EAAeQ,EAAKI,GAAM,CAC5B,MAAMC,EAAaG,EAAYR,EAAII,GAAMH,EAAIG,IAG7C,OAAIR,EAAcS,IAAgBtB,EAAOsB,KAAgBT,EAAcI,EAAII,KAAUR,EAAcK,EAAIG,KAGvGD,EAAIC,GAAOC,EACJF,GAHEA,EAMX,OAAOA,CAAG,EACTN,KApB0CI,ICD1B,CAACD,EAAKC,MACzBS,MAAOX,EAAUC,EAAKC,GACtBU,QAASL,EAAYN,EAAKC,GAC1BW,QAASJ,EAAYR,EAAKC"}