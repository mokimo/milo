function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},t.apply(this,arguments)}const e=[{adobetv:"tv.adobe.com"},{gist:"https://gist.github.com"},{caas:"/tools/caas"},{faas:"/tools/faas"},{fragment:"/fragments/"},{instagram:"https://www.instagram.com"},{slideshare:"https://www.slideshare.net"},{tiktok:"https://www.tiktok.com"},{twitter:"https://twitter.com"},{vimeo:"https://vimeo.com"},{vimeo:"https://player.vimeo.com"},{youtube:"https://www.youtube.com"},{youtube:"https://youtu.be"},{"pdf-viewer":".pdf"},{video:".mp4"},{merch:"/tools/ost?"},{"offer-preview":"/tools/commerce"}],o=["accordion","columns","z-pattern"],n={stage:{name:"stage",ims:"stg1",adobeIO:"cc-collab-stage.adobe.io",adminconsole:"stage.adminconsole.adobe.com",account:"stage.account.adobe.com",edgeConfigId:"8d2805dd-85bf-4748-82eb-f99fdad117a6",pdfViewerClientId:"600a4521c23d4c7eb9c7b039bee534a0"},prod:{name:"prod",ims:"prod",adobeIO:"cc-collab.adobe.io",adminconsole:"adminconsole.adobe.com",account:"account.adobe.com",edgeConfigId:"2cba807b-7430-41ae-9aac-db2b0da742d5",pdfViewerClientId:"3c0a5ddf2cc04d3198d9e48efc390fa9"}};n.local=t({},n.stage,{name:"local"});const i=new URL(window.location.href);function a(e){const{host:o}=window.location,a=i.searchParams.get("env");return a?t({},n[a],{consumer:e[a]}):o.includes("localhost")?t({},n.local,{consumer:e.local}):o.includes("hlx.page")||o.includes("hlx.live")||o.includes("stage.adobe")||o.includes("corp.adobe")?t({},n.stage,{consumer:e.stage}):t({},n.prod,{consumer:e.prod})}function r(t,e=window.location.pathname){if(!t)return{ietf:"en-US",tk:"hah7vzn.css",prefix:""};const o=e.split("/"),n=o[1],i=t[n]||t[""];var a;if("langstore"===n)return i.prefix=`/${n}/${o[2]}`,"rtl"===(null==(a=Object.values(t).find(t=>{var e;return null==(e=t.ietf)?void 0:e.startsWith(o[2])}))?void 0:a.dir)&&(i.dir="rtl"),i;const r="en-US"===i.ietf;return i.prefix=r?"":`/${n}`,i.region=r?"us":n.split("_")[0],i}function s(t,e=document){const o=t&&t.includes(":")?"property":"name",n=e.head.querySelector(`meta[${o}="${t}"]`);return n&&n.content}const c=(()=>{let t;const e=new Promise(e=>{t=e});return o=>(void 0!==o&&t(o),e)})(),[l,d,p]=(()=>{let n={};return[l=>{var d,p;const m=l.origin||window.location.origin,u=l.pathname||window.location.pathname;n=t({env:a(l)},l),n.codeRoot=l.codeRoot?`${m}${l.codeRoot}`:m,n.base=n.miloLibs||n.codeRoot,n.locale=u?r(l.locales,u):r(l.locales),n.autoBlocks=l.autoBlocks?[...e,...l.autoBlocks]:e,n.doNotInline=l.doNotInline?[...o,...l.doNotInline]:o;const h=s("content-language")||n.locale.ietf;document.documentElement.setAttribute("lang",h);try{var f,w;const t=s("content-direction")||n.locale.dir||n.locale.ietf&&(null==(f=new Intl.Locale(n.locale.ietf))||null==(w=f.textInfo)?void 0:w.direction)||"ltr";document.documentElement.setAttribute("dir",t)}catch(t){console.log("Invalid or missing locale:",t)}return n.locale.contentRoot=`${m}${n.locale.prefix}${null!=(d=n.contentRoot)?d:""}`,n.useDotHtml=!i.origin.includes(".hlx.")&&(null!=(p=l.useDotHtml)?p:i.pathname.endsWith(".html")),n.entitlements=c,function(t){var e;(e=window).milo||(e.milo={}),window.milo.deferredPromise=new Promise(e=>{t.resolveDeferred=e})}(n),n},t=>n=t,()=>n]})();function m(t,...e){const o=t.reduce((t,o,n)=>e[n]instanceof HTMLElement?`${t+o}<elem ref="${n}"></elem>`:t+o+(e[n]||""),""),n=document.createRange().createContextualFragment(o).children[0];return Array.prototype.map.call(n.querySelectorAll("elem"),t=>{const o=t.getAttribute("ref");t.replaceWith(e[o])}),n}!function(t={}){if(window.lana)return;const e=t=>{var e;null==(e=window.lana)||e.log(t.reason||t.error||t.message,{errorType:"i"})};window.lana={log:async(...t)=>(window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",e),await import("./lana-5c295f14.js"),window.lana.log(...t)),debug:!1,options:t},window.addEventListener("error",e),window.addEventListener("unhandledrejection",e)}(),window.matchMedia("(min-width: 900px)"),window.matchMedia("(min-width: 900px) and (max-width: 1440px)");const u={},h=(t,e)=>{const o=((t,e)=>`${t.locale.contentRoot}/placeholders.json${"default"!==e&&"string"==typeof e&&e.length?`?sheet=${e}`:""}`)(t,e);return u[o]=u[o]||new Promise(async t=>{const e=await fetch(o).catch(()=>({})),n=e.ok?await e.json():{data:[]};if(0===n.data.length)return void t({});const i={};n.data.forEach(t=>{i[t.key]=t.value}),t(i)}),u[o]};async function f(t,e,o){var n;let i=!1;const a="en-US",r=()=>{const t=e.locale.contentRoot,o=e.locale.prefix;return o.length?t.endsWith(o)?t.replace(o,""):t.replace(`${o}/`,"/"):t},s=async()=>{const t={locale:{ietf:a,contentRoot:r()}},e=await h(t,o).catch(()=>({}));return i=!0,e};if(null!=(n=e.placeholders)&&n[t])return e.placeholders[t];const c=await h(e,o).catch(async()=>await s());if(null!=c&&c[t])return c[t];if(!i&&e.locale.ietf!==a){const e=await s();if(null!=e&&e[t])return e[t]}return function(t){return t.replaceAll("-"," ")}(t)}async function w(t,e,o="default"){return"string"==typeof t&&t.length?await f(t,e,o):""}let v,g,b,y,P=t=>t;const $={selectors:{prompt:".appPrompt"},delay:7e3,loaderColor:"#EB1000"},x=t=>{var e;return null==t||null==(e=t.textContent)?void 0:e.trim().toLowerCase()};class k{constructor({promptPath:t,id:e,profileApi:o}={}){var n=this;this.init=async function(){const t=await n.fetchContent();t&&(await n.getData(t),n.options["redirect-url"]&&(n.template=n.decorate(),n.addEventListeners(),document.body.appendChild(n.template),n.elements.closeIcon.focus(),n.redirectFn=n.initRedirect()))},this.fetchContent=async function(){const t=await fetch(`${n.promptPath}.plain.html`);if(!t.ok)return"";const e=await t.text(),o=await async function(t,e,o=/{{(.*?)}}|%7B%7B(.*?)%7D%7D/g,n="default"){if("string"!=typeof t||!t.length)return"";const i=[...t.matchAll(new RegExp(o))];if(!i.length)return t;const a=Array.from(i,t=>t[1]||t[2]),r=await async function(t,e,o="default"){if(!Array.isArray(t)||!t.length)return[];const n=[];return t.forEach(t=>{n.push(f(t,e,o))}),await Promise.all(n)}(a,e,n);let s=0;return t.replaceAll(o,()=>r[s++])}(e,p());return(new DOMParser).parseFromString(o,"text/html")},this.getData=async function(t){const e=t.querySelector("picture");n.image=e||"";const o=t.querySelector("h2");n.title=(null==o?void 0:o.innerText)||"";const i=t.querySelector("h3");n.subtitle=(null==i?void 0:i.innerText)||await w("pep-prompt-subtitle",p());const a=t.querySelector("em > a");n.cancelText=(null==a?void 0:a.innerText)||await w("pep-prompt-cancel",p()),n.profile={avatar:"",name:"okan",email:"okan@adobe.com"};const r=[...t.querySelector(".section-metadata").childNodes].reduce((t,e)=>{var o;if(2===(null==(o=e.children)?void 0:o.length)){const o=x(e.children[0]),n=x(e.children[1]);o&&n&&(t[o]=n)}return t},{});r["loader-duration"]=parseInt(r["loader-duration"]||$.delay,10),r["loader-color"]=r["loader-color"]||$.defaultColor,n.options=r},this.decorate=()=>(this.elements.closeIcon=m(v||(v=P`<button class="appPrompt-close"></button>`)),this.elements.cta=m(g||(g=P`<button class="appPrompt-cta appPrompt-cta--close">${0}</button>`),this.cancelText),this.elements.profile=Object.keys(this.profile).length?m(b||(b=P`<div class="appPrompt-profile">
        <div class="appPrompt-avatar">
          <img class="appPrompt-avatar-image" src="${0}" />
        </div>
        <div class="appPrompt-user">
          <div class="appPrompt-name">${0}</div>
          <div class="appPrompt-email">${0}</div>
        </div>
      </div>`),this.profile.avatar,this.profile.name,this.profile.email):"",m(y||(y=P`<div class="appPrompt">
      <div class="appPrompt-icon">
        ${0}
      </div>
      <div class="appPrompt-title">${0}</div>
      ${0}
      <div class="appPrompt-footer">
        <div class="appPrompt-text">${0}</div>
        ${0}
      </div>
      <div class="appPrompt-progressWrapper">
        <div class="appPrompt-progress" style="background-color: ${0}; animation-duration: ${0}ms;"></div>
      </div>
      ${0}
    </div>`),this.image,this.title,this.elements.profile,this.subtitle,this.elements.cta,this.options["loader-color"],this.options["loader-duration"],this.elements.closeIcon)),this.addEventListeners=()=>{[this.elements.closeIcon,this.elements.cta].forEach(t=>t.addEventListener("click",this.close))},this.initRedirect=()=>setTimeout(()=>{},this.options["loader-duration"]),this.isDismissedPrompt=()=>k.getDismissedPrompts().includes(this.id),this.setDismissedPrompt=()=>{const t=new Set(k.getDismissedPrompts());t.add(this.id),document.cookie=`dismissedAppPrompts=${JSON.stringify([...t])};path=/`},this.close=()=>{const t=document.querySelector($.selectors.prompt);null==t||t.remove(),clearTimeout(this.redirectFn),this.setDismissedPrompt()},this.promptPath=t,this.id=e,this.profileApi=o,this.elements={},this.isDismissedPrompt()||this.init()}}async function I(t){return await new k(t)}k.getDismissedPrompts=()=>{var t;const e=null==(t=document.cookie.split(";").find(t=>t.trim().startsWith("dismissedAppPrompts=")))?void 0:t.split("=")[1];return e?JSON.parse(e):[]},window.init=I;export{I as default};
